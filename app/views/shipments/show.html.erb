<% if flash[:notice] %>
  <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4" role="alert">
    <span class="block sm:inline"><%= flash[:notice] %></span>
  </div>
<% end %>

<% if flash[:alert] %>
  <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4" role="alert">
    <span class="block sm:inline"><%= flash[:alert] %></span>
  </div>
<% end %>
<h1>
  <img src="https://cdn-icons-png.flaticon.com/512/2921/2921823.png" alt="Box Logo" style="width: 50px; height: 50px; vertical-align: middle; text-align: center">
  Shipment Details
</h1>

<div class="flex justify-center items-center min-h-[50vh] animate-fade-in">
  <table class="min-w-[400px] bg-gray-50 rounded-md shadow-md text-center transition-transform duration-500 ease-in-out hover:scale-105">
    <tbody>
      <tr>
        <th class="py-2 px-4 text-left text-gray-700">Shipment ID</th>
        <td class="py-2 px-4"><%= @shipment.id %></td>
      </tr>
      <tr>
        <th class="py-2 px-4 text-left text-gray-700">Source</th>
        <td class="py-2 px-4"><%= @shipment.source %></td>
      </tr>
      <tr>
        <th class="py-2 px-4 text-left text-gray-700">Destination</th>
        <td class="py-2 px-4"><%= @shipment.target %></td>
      </tr>
      <tr>
        <th class="py-2 px-4 text-left text-gray-700">Item Details</th>
        <td class="py-2 px-4"><%= @shipment.item_details %></td>
      </tr>
      <tr>
        <th class="py-2 px-4 text-left text-gray-700">Status</th>
        <td class="py-2 px-4"><%= Shipment::STATUS_VALUES.key(@shipment.status).to_s.humanize rescue @shipment.status.to_s.humanize %></td>
      </tr>
    </tbody>
  </table>
</div>
<style>
@keyframes fade-in {
  from { opacity: 0; transform: translateY(40px);}
  to { opacity: 1; transform: translateY(0);}
}
.animate-fade-in {
  animation: fade-in 0.8s cubic-bezier(0.4,0,0.2,1);
}
</style>
</thead>
<style>
  table, th, td {
    border: 3px solid black;
    border-collapse: collapse;
  }
  th, td {
    background-color:rgb(227, 231, 224);
  }
  th {
    padding: 8px;
    text-align: center;
  }
  td {
    padding: 8px;
  }
  tr:nth-child(even) {
    background-color:rgb(91, 85, 85);
  }
  tr:nth-child(odd) {
    background-color:rgb(255, 255, 255);
  }
  tr:hover {
    background-color:rgb(255, 255, 255);
  }
</style>

<%= link_to "Back to Shipments", shipments_path, class: "btn btn-secondary" %>

<% if current_user.delivery_partner? && @shipment.status == Shipment::STATUS_VALUES["pending"] %>
  <%= button_to accept_delivery_shipment_path(@shipment), method: :post, class: "btn btn-success ml-2" do %>
    Accept Delivery
  <% end %>
<% end %>

<% if current_user.delivery_partner? %>
  <h3>Update Shipment Status</h3>
  <%= form_with(model: @shipment, url: shipment_path(@shipment), method: :patch, local: true) do |f| %>
    <div>
      <%= f.label :status, "Status" %><br />
      <%= f.select :status, Shipment::STATUS_VALUES.map { |k, v| [k.humanize, v] }, selected: @shipment.status %>
    </div>
    <div>
      <%= f.submit "Update Status", class: "btn btn-primary mt-2" %>
    </div>
  <% end %>
<% end %>

<style>
  body {
    background: linear-gradient(135deg,rgb(149, 154, 139) 0%, #8ec5fc 100%);
    min-height: 100vh;
    font-family: 'Segoe UI', 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
  }
  </style>
